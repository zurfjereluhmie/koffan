{{define "partials/manage_section_item"}}
<div
    id="manage-section-{{.Section.ID}}"
    class="p-3 bg-stone-50 rounded-lg border border-stone-100 flex items-center gap-3"
    :class="{'bg-red-50 border-red-200': selectMode && selectedSections.includes({{.Section.ID}})}"
    @click="if(selectMode) toggleSection({{.Section.ID}})"
>
    <!-- Select checkbox -->
    <template x-if="selectMode">
        <input
            type="checkbox"
            :checked="selectedSections.includes({{.Section.ID}})"
            @click.stop="toggleSection({{.Section.ID}})"
            class="w-4 h-4 rounded border-stone-300 text-pink-400 focus:ring-pink-400"
        >
    </template>

    <!-- Section name -->
    <span class="flex-1 font-medium text-stone-700 text-sm">{{.Section.Name}}</span>

    <!-- Actions -->
    <template x-if="!selectMode">
        <div class="flex items-center gap-1">
            <!-- Move up -->
            <button
                hx-post="/sections/{{.Section.ID}}/move-up"
                hx-target="#manage-sections-list"
                hx-swap="innerHTML"
                class="p-1.5 rounded-md hover:bg-stone-200 text-stone-400 disabled:opacity-30"
                {{if eq .Index 0}}disabled{{end}}
            >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                </svg>
            </button>

            <!-- Move down -->
            <button
                hx-post="/sections/{{.Section.ID}}/move-down"
                hx-target="#manage-sections-list"
                hx-swap="innerHTML"
                class="p-1.5 rounded-md hover:bg-stone-200 text-stone-400 disabled:opacity-30"
                {{if eq (add .Index 1) .Total}}disabled{{end}}
            >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>

            <!-- Delete -->
            <button
                hx-delete="/sections/{{.Section.ID}}"
                hx-target="#manage-section-{{.Section.ID}}"
                hx-swap="outerHTML"
                hx-confirm="Usunąć sekcję '{{.Section.Name}}'?"
                hx-on::after-request="$data.refreshSectionsAndSelects()"
                class="p-1.5 rounded-md hover:bg-red-100 text-stone-400 hover:text-red-500"
            >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </template>
</div>
{{end}}
